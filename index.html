<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Taoyuan Sharing Platform</title>

  <link rel="stylesheet" href="styles.css" />

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
  <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.min.js"></script>
</head>

<body>
  <header>
    <h2 class="logo">
      <a href="#welcome-section" style="color:inherit;text-decoration:none;">ğŸ  Home</a>
    </h2>

    <nav class="navigation">
      <a href="#about-section" id="nav-about">About Us</a>
      <a href="#services-section" id="nav-services">Services</a>
      <a href="#events-section" id="nav-events">Events</a>
      <a href="#members-section" id="nav-members">Members</a>

      <a class="nav-btn" href="/login.html">Login</a>
      <a class="nav-btn" href="/register.html">Register</a>

      <!-- âœ… ä¸è¦å†ç”¨ popup äº†ï¼ˆä½ è¦å¾ index æ¶ˆé™¤ç¬¬äºŒå¼µæˆªåœ–é‚£æ®µï¼‰ -->
      <!-- <button class="btnLogin-popup" type="button">Quick Login</button> -->
    </nav>
  </header>

  <section id="welcome-section">
    <div class="welcome-content">
      <h1 id="main-title">Welcome to Taoyuan Sharing Community</h1>
      <hr class="welcome-divider" />
      <p id="main-mission">
        Share, Save, Smile â€” Free Food, Clothes, Books & Useful Items Around You!
      </p>

      <div style="max-width:900px;margin:20px auto 0;display:flex;gap:12px;flex-wrap:wrap;justify-content:center;">
        <div style="max-width:900px;margin:20px auto 0;display:flex;gap:12px;flex-wrap:wrap;justify-content:center;">
          <div class="highlight-box feature-card" style="min-width:220px;flex:1;">
            <strong>â™» Reduce Waste</strong>
            <div class="feature-desc">Give items a second life instead of throwing away.</div>
            <a class="feature-btn" href="#services-section">Browse Items</a>
          </div>

          <div class="highlight-box feature-card" style="min-width:220px;flex:1;">
            <strong>ğŸ¤ Help Students</strong>
            <div class="feature-desc">Support local & international students in Taoyuan.</div>
            <a class="feature-btn" href="#members-section">View Ranking</a>
          </div>

          <div class="highlight-box feature-card" style="min-width:220px;flex:1;">
            <strong>ğŸ“ Easy Pickup</strong>
            <div class="feature-desc">Show area & pickup location clearly for everyone.</div>
            <a class="feature-btn" href="#howto-section">How It Works</a>
          </div>
        </div>
        <div class="highlight-box" style="min-width:220px;flex:1;">
          <strong>ğŸ¤ Help Students</strong>
          <div style="opacity:.8;margin-top:6px;">Support local & international students in Taoyuan.</div>
        </div>
        <div class="highlight-box" style="min-width:220px;flex:1;">
          <strong>ğŸ“ Easy Pickup</strong>
          <div style="opacity:.8;margin-top:6px;">Show area & pickup location clearly for everyone.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- âœ… æ“ä½œæŒ‡å¼• -->
  <section id="howto-section" style="padding:40px 20px;">
    <div class="highlight-box" style="max-width:1100px;margin:0 auto;">
      <div class="orange-bar">âœ¨ How it works</div>

      <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:14px;">
        <div class="highlight-box" style="flex:1;min-width:220px;">
          <strong>1) Login / Register</strong>
          <div style="opacity:.85;margin-top:6px;">Create an account to post items.</div>
        </div>
        <div class="highlight-box" style="flex:1;min-width:220px;">
          <strong>2) Add Donation</strong>
          <div style="opacity:.85;margin-top:6px;">Fill name, qty, area, pickup, image, description.</div>
        </div>
        <div class="highlight-box" style="flex:1;min-width:220px;">
          <strong>3) Everyone Can Browse</strong>
          <div style="opacity:.85;margin-top:6px;">All users can see item location + donor.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- âœ… ä¸»é å¿«é€Ÿç™»å…¥/è¨»å†Šï¼ˆå¯åˆ‡æ›æ¨¡å¼ï¼‰ -->
  <section id="simple-auth-section" style="padding:0 20px 40px;">
    <div class="highlight-box" style="max-width:1100px;margin:0 auto;">
      <div class="orange-bar">ğŸ” Quick Access</div>

      <div id="auth-status" style="padding:12px 10px;opacity:.9;">Checking login...</div>

      <div style="display:flex;gap:16px;flex-wrap:wrap;align-items:flex-start;">
        <!-- âœ… å·¦ï¼šç™»å…¥/è¨»å†Šåˆ‡æ›è¡¨å–® -->
        <div style="flex:1;min-width:260px;">
          <!-- å·²ç™»å…¥é¡¯ç¤º -->
          <div id="inline-logged-box" class="highlight-box" style="display:none;">
            <strong>âœ… You are logged in</strong>
            <div style="margin-top:8px;">
              Email: <span id="inline-logged-user"></span>
            </div>
            <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap;">
              <a class="nav-btn" href="/add-donation.html">Add Donation</a>
              <button id="inline-logout-btn" class="nav-btn" type="button">Logout</button>
            </div>
          </div>

          <!-- æœªç™»å…¥é¡¯ç¤º -->
          <form id="inline-auth-form" style="margin:0;">
            <strong id="inline-auth-title" style="font-size:1.05rem;">ç·šä¸Šç™»å…¥</strong>
            <input id="inline-auth-email" type="email" placeholder="Email (username)" required />
            <input id="inline-auth-password" type="password" placeholder="Password" required />
            <button id="inline-auth-submit" type="submit">ç™»å…¥</button>

            <div style="margin-top:8px;font-size:.95rem;">
              <span id="inline-switch-text">é‚„æ²’æœ‰å¸³è™Ÿï¼Ÿ</span>
              <a href="#" id="inline-switch-mode">è¨»å†Š</a>
            </div>

            <div id="inline-auth-msg" style="min-height:18px;font-size:.95rem;margin-top:6px;"></div>
          </form>
        </div>

        <!-- âœ… å³ï¼šåˆ†é å°å‘ -->
        <div class="highlight-box" style="flex:1;min-width:260px;">
          <strong style="font-size:1.05rem;">Or use separate pages</strong>
          <div style="margin-top:10px;display:flex;gap:10px;flex-wrap:wrap;">
            <a class="nav-btn" href="/login.html">Go to Login Page</a>
            <a class="nav-btn" href="/register.html">Go to Register Page</a>
            <a class="nav-btn" href="/add-donation.html">Add Donation</a>
          </div>
          <div style="opacity:.8;margin-top:10px;">
            Tip: After you login once, you stay logged in (saved in localStorage).
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- âœ… é¦–é ï¼šç¾æœ‰å•†å“å€ -->
  <section id="home-items-section" style="padding:40px 20px;">
    <div class="highlight-box" style="max-width:1100px;margin:0 auto;">
      <div class="orange-bar" id="home-items-title">ğŸ§¡ New Items </div>
      <ul id="new-items-list"></ul>
      <div id="home-items-msg" style="padding:10px;opacity:.8;"></div>
    </div>
  </section>

  <!-- âœ… Modalï¼ˆé»å•†å“æœƒè·³ï¼‰ -->
  <div id="item-modal">
    <div class="modal-content">
      <button id="modal-close" type="button">âœ–</button>
      <img id="modal-img" src="" alt="item" />
      <h2 id="modal-name"></h2>
      <p id="modal-desc"></p>
      <p><strong>Qty:</strong> <span id="modal-qty"></span></p>
      <p><strong>Area:</strong> <span id="modal-area"></span></p>
      <p><strong>Pickup:</strong> <span id="modal-pickup"></span></p>
      <p><strong>Donor:</strong> <span id="modal-donor"></span></p>
    </div>
  </div>

  <!-- âœ… About -->
  <section id="about-section" style="padding:80px 20px;">
    <div class="highlight-box" style="max-width:1100px;margin:0 auto;">
      <div class="orange-bar">ğŸŒ¿ About</div>
      <p style="opacity:.9;line-height:1.7;margin-top:12px;">
        Taoyuan Sharing Platform is a student-friendly community website for exchanging food, clothes, books and useful items.
        We want to reduce waste and help students save money.
      </p>
      <div style="margin-top:12px;">
        <button id="about-btn" class="nav-btn" type="button">Open About Popup</button>
      </div>
    </div>
  </section>

  <!-- âœ… Services -->
  <section id="services-section" style="padding:80px 20px;">
    <div class="highlight-box" style="max-width:1100px;margin:0 auto;">
      <div class="orange-bar">ğŸ§° Services</div>
      <p style="opacity:.9;line-height:1.7;margin-top:12px;">
        Browse donated items by category. Click an item to see details like quantity, area and pickup location.
      </p>
      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;">
        <button id="services-btn" class="nav-btn" type="button">Open Items Board</button>
        <a class="nav-btn" href="/add-donation.html">Add Donation</a>
      </div>
    </div>
  </section>

  <!-- âœ… Events -->
  <section id="events-section" style="padding:80px 20px;">
    <div class="highlight-box" style="max-width:1100px;margin:0 auto;">
      <div class="orange-bar">ğŸ—º Events</div>
      <p style="opacity:.9;line-height:1.7;margin-top:12px;">
        Check community events and get directions from your current location.
      </p>
      <div style="margin-top:12px;">
        <button id="events-btn" class="nav-btn" type="button">Open Events Map</button>
      </div>
    </div>
  </section>

  <!-- âœ… Members / Leaderboard -->
  <section id="members-section" style="padding:80px 20px;">
    <div class="highlight-box" style="max-width:1100px;margin:0 auto;">
      <div class="orange-bar">ğŸ† Member Ranking (XP)</div>

      <div style="opacity:.85;margin-top:10px;">
        XP rule: XP = total donated quantity Ã— 10 (based on SUM(amount)).
      </div>

      <div id="leaderboard-msg" style="padding:10px 0;opacity:.85;">Loading leaderboard...</div>

      <div style="overflow:auto;">
        <table style="width:100%;border-collapse:collapse;min-width:520px;">
          <thead>
            <tr style="text-align:left;border-bottom:1px solid rgba(0,0,0,.15);">
              <th style="padding:10px;">Rank</th>
              <th style="padding:10px;">User</th>
              <th style="padding:10px;">Listings</th>
              <th style="padding:10px;">Total Qty</th>
              <th style="padding:10px;">XP</th>
              <th style="padding:10px;">Level</th>
            </tr>
          </thead>
          <tbody id="leaderboard-body"></tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- â­â­â­ ABOUT US POPUP MODAL â­â­â­ -->
  <div class="about-popup">
    <div class="about-box">
      <span class="about-close"><ion-icon name="close"></ion-icon></span>

      <div class="about-wrapper">
        <div class="about-image">
          <img src="https://images.unsplash.com/photo-1582213782179-e0d53f98f2ca?" alt="Sharing Image">
        </div>
        <div class="about-content">
          <h2>ğŸŒ¿ About Taoyuan Sharing</h2>
          <p>
            Welcome to Taoyuan Share! Our platform helps students exchange items,
            services, and support each other in a friendly, safe community.
          </p>
          <p>
            Our mission is to reduce waste, save money, and build strong connections
            between local and international students.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- â­â­â­ SERVICES POPUP MODAL â­â­â­ -->
  <div class="services-popup">
    <div class="services-box">
      <span class="services-close">âœ–</span>

      <div class="services-layout">
        <aside class="category-board">
          <h2 class="popup-title">Available Items</h2>

          <button class="cat-btn active" data-cat="food">ğŸ Food</button>
          <button class="cat-btn" data-cat="clothes">ğŸ‘• Clothes</button>
          <button class="cat-btn" data-cat="books">ğŸ“š Books</button>
          <button class="cat-btn" data-cat="furniture">ğŸª‘ Furniture</button>
          <button class="cat-btn" data-cat="household">ğŸ  Household</button>
          <button class="cat-btn" data-cat="others">âœ¨ Others</button>

          <button id="add-donation-btn" class="add-donation-btn">â• Add Donation</button>
        </aside>

        <section class="items-area">
          <div id="items-grid" class="items-grid"></div>

          <div id="item-detail" class="item-detail hidden">
            <img id="detail-img" alt="detail">
            <div>
              <h3 id="detail-name"></h3>
              <p id="detail-desc"></p>
              <p><strong>Status:</strong> <span id="detail-status"></span></p>
              <p><strong>Pickup Area:</strong> <span id="detail-area"></span></p>
              <p><strong>Donor:</strong> <span id="detail-donor"></span></p>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>

  <!-- Events Popup -->
  <div class="events-popup">
    <div class="events-box">
      <span class="events-close" title="Close"><ion-icon name="close"></ion-icon></span>

      <div id="events-map"></div>

      <div id="event-info" class="event-info" style="display:none;">
        <img id="event-img" src="" alt="Event Image" />
        <h3 id="event-title"></h3>
        <p><strong>ğŸ“ Location:</strong> <span id="event-location"></span></p>
        <p><strong>ğŸ•’ Time:</strong> <span id="event-time"></span></p>
        <p id="event-desc"></p>
        <button id="btn-directions" type="button">Get Directions from Your Place</button>
      </div>
    </div>
  </div>

  <!-- âœ… scriptsï¼ˆåªè¼‰ä¸€æ¬¡ script.jsï¼‰ -->
  <script src="i18n.js"></script>
  <script src="script.js"></script>

  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</body>
</html>
